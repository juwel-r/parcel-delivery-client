import{h as b,u as v,i as F,k as C,l as S,j as s,N as I,a as D,B as E,L as x,t as o,m as k,g as P}from"./index-BHEJdjnh.js";import{C as R,a as T,b as U,c as z,d as A}from"./card-DN-iCoyM.js";import{I as B}from"./input-C6nhw93-.js";import{u as M,a as H,l as Q,F as V,b as n,c as t,d as l,e as c,f as m,g as d}from"./zod-87Hwqkfn.js";import{P as W}from"./PasswordField-CNLNtD5J.js";import{S as q}from"./spinner-D1tsCXB7.js";import"./label-DJxDZod0.js";import"./eye-ChL5Qa-I.js";function G({className:u,...p}){const[h,{isLoading:i}]=b(),{data:j,isLoading:f}=v(),g=F(),N=C(),w=S(),a=M({resolver:H(Q),defaultValues:{email:"",password:""}}),y=async e=>{const L={email:e.email,password:e.password};try{const r=await h(L).unwrap();o.success(r.message),g(k.util.invalidateTags(["USER"])),N(w.state||"/")}catch(r){console.log(r),o.error(r.data.message||"Something went wrong.")}};return!f&&j?.email?s.jsx(I,{to:"/"}):s.jsx("div",{className:D("flex flex-col gap-6",u),...p,children:s.jsxs(R,{children:[s.jsxs(T,{className:"text-center",children:[s.jsx(U,{className:"text-xl",children:"Welcome back"}),s.jsx(z,{children:"Login with your Credentials"})]}),s.jsx(A,{children:s.jsx(V,{...a,children:s.jsxs("form",{onSubmit:a.handleSubmit(y),className:"space-y-4 flex flex-col",children:[s.jsx(n,{control:a.control,name:"email",render:({field:e})=>s.jsxs(t,{children:[s.jsx(l,{children:"Email"}),s.jsx(c,{children:s.jsx(B,{placeholder:"john.doe@email.com",type:"email",...e})}),s.jsx(m,{className:"sr-only",children:"This is your public display email."}),s.jsx(d,{})]})}),s.jsx(n,{control:a.control,name:"password",render:({field:e})=>s.jsxs(t,{children:[s.jsx(l,{children:"Password"}),s.jsx(c,{children:s.jsx(W,{...e})}),s.jsx(d,{})]})}),s.jsxs(E,{disabled:i,type:"submit",className:"w-1/3 ",children:["Login ",i&&s.jsx(q,{className:"size-4"})]}),s.jsxs(m,{className:"",children:["Don't have an account?"," ",s.jsx(x,{className:"underline",to:"/registration",children:"Registration"})]})]})})})]})})}function ss(){return s.jsx("div",{className:"bg-muted flex min-h-svh flex-col items-center justify-center gap-6 p-6 md:p-10",children:s.jsxs("div",{className:"flex w-full max-w-sm flex-col gap-6",children:[s.jsxs(x,{to:"/",className:"flex items-center gap-2 self-center font-medium",children:[s.jsxs("div",{className:"bg-primary text-primary-foreground flex size-6 items-center justify-center rounded-md",children:[s.jsx(P,{})," "]}),"Envilo"]}),s.jsx(G,{})]})})}export{ss as default};
