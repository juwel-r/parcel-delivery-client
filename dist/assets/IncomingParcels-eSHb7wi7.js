import{c as _,r as t,j as e,L as F,t as p}from"./index-BHEJdjnh.js";import{i as $,j as R}from"./parcelApi-CBcjitBd.js";import{C as E,a as M,b as q,c as z,d as H}from"./card-DN-iCoyM.js";import{L as W}from"./label-DJxDZod0.js";import{P as n,a as B,D as Q}from"./ParcelListSkeleton-DpU1dCPv.js";import{D as U,P as V,g as Y}from"./PaginationCompo-CXf9qr8g.js";import{S as G}from"./spinner-D1tsCXB7.js";import{a as u,b as h,c as f}from"./tooltip-vmTTCXAz.js";import{S as J}from"./SearchAndFilter-mRkhxu9V.js";import{H as K}from"./history-PDEt3pHc.js";import{f as O}from"./format-B-tffhz4.js";import"./skeleton-W8v24tY2.js";import"./index-CUCISiCF.js";import"./select-Dx3cQo6C.js";import"./check-BUpAhevX.js";import"./chevron-right-DwADlVQ_.js";import"./input-C6nhw93-.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],Z=_("check-check",X);function ge(){const c=t.useId(),[g,j]=t.useState("10"),[y,N]=t.useState(1),[i,S]=t.useState(""),[l,v]=t.useState(null),[C,w]=t.useState([]),[d,T]=t.useState(null),[m,k]=t.useState("-deliveryDate"),[D,x]=t.useState(""),{data:r,isLoading:o,isFetching:b}=$({limit:g,page:y,searchTerm:i,type:l,currentStatus:d,sort:m}),[P]=R();console.log({myParcels:r});const I=async s=>{x(s);try{const a=await P(s).unwrap();console.log(a),p.info("Parcel has been confirmed as Delivery.")}catch(a){console.log(a),p.error(Y(a))}finally{x("")}};t.useEffect(()=>{const s=[...new Set(r?.data?.map(a=>a.type))];s.length>1&&w(s)},[r]);const L=r?.meta?.page??0,A=r?.meta?.totalPage??1;return e.jsx(e.Fragment,{children:e.jsxs(E,{className:"w-full md:max-w-8/10 mx-auto",children:[e.jsxs(M,{children:[e.jsx(q,{className:"text-center text-2xl",children:"Incoming Parcels"}),e.jsx(z,{className:"text-center",children:"All parcel of you are shown in below. You can search and filter them as need."}),e.jsx(J,{typeNames:C,searchTerm:i,setSearchTerm:S,type:l,setType:v,currentStatus:d,setCurrentStatus:T,sort:m,setSort:k})]}),!o&&!r?.data?.length?e.jsx("h1",{className:"text-2xl text-muted-foreground text-center my-5",children:"No Data to show."}):e.jsx("div",{children:o||b?e.jsxs(e.Fragment,{children:[e.jsx(n,{}),e.jsx(n,{}),e.jsx(n,{}),e.jsx(n,{}),e.jsx(n,{}),e.jsx(n,{})]}):e.jsx(H,{className:"space-y-5 p-4 w-full",children:!o&&r?.data?.length&&r?.data?.map(s=>e.jsx("div",{className:"relative flex w-full items-start gap-2 rounded-md border border-input p-4 shadow-xs outline-none has-data-[state=checked]:border-primary/50",children:e.jsxs("div",{className:"grid grid-cols-4 lg:grid-cols-12 md:gap-4 gap-2 gap-y-5 w-full",children:[e.jsxs("div",{className:"col-span-3 lg:col-span-4 flex grow items-center gap-x-5",children:[s.type==="Parcel"?e.jsx(B,{}):e.jsx(Q,{}),e.jsxs("div",{className:"grid gap-x-2 gap-y-1 flex-1",children:[e.jsxs(W,{htmlFor:c,className:"text-md",children:[s.type,e.jsx("span",{className:"text-xs leading-[inherit] font-normal px-1 rounded-xs bg-primary/70 text-white/90",children:s.currentStatus})]}),e.jsxs("p",{id:`${c}-description`,className:"text-sm text-muted-foreground",children:["Delivery Fee: à§³",s.fee]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["From:"," ",e.jsx("strong",{children:s.sender.name})]})]})]}),e.jsxs("div",{className:"col-span-4 text-muted-foreground text-sm space-y-1",children:[e.jsxs("p",{children:["Booking Date:",O(new Date(s.createdAt),"dd/M/y")]}),e.jsxs("p",{children:["Tracking Number :",e.jsxs("span",{className:"font-bold",children:[" ",s.trackingId]})]}),e.jsxs("p",{children:["Delivery Address:",s.deliveryAddress]})]}),e.jsx("div",{className:"col-span-2 lg:col-span-2 flex items-center justify-center",children:e.jsx(F,{to:`/tracking/${s.trackingId}`,children:e.jsxs(u,{children:[e.jsx(h,{type:"button",children:e.jsx("div",{className:"text-primary",children:e.jsx(K,{size:44,strokeWidth:2.75})})}),e.jsx(f,{children:e.jsx("p",{children:"View Status Logs"})})]})})}),e.jsx("div",{className:"col-span-2 flex items-center justify-center",children:e.jsx(U,{onConfirm:()=>I(s._id),content:"Confirm Delivery?",children:e.jsxs("button",{disabled:s.currentStatus!=="IN_TRANSIT",className:` ${s.currentStatus!=="IN_TRANSIT"||o?"text-muted-foreground cursor-not-allowed flex items-center justify-center":"text-green-500 flex items-center justify-center"}`,children:[e.jsxs(u,{children:[e.jsx(h,{asChild:!0,type:"button",children:e.jsx(Z,{size:44,strokeWidth:2.75})}),e.jsx(f,{children:e.jsx("p",{children:`${s.currentStatus==="IN_TRANSIT"?"Confirm delivery.":`This ${s.type} is now on ${s.currentStatus}. Confirm after in transit.`}`})})]}),D===s._id&&e.jsx(G,{className:"size-8"})]})})})]})},s._id))})}),e.jsx(V,{currentPage:L,totalPages:A,setLimit:j,setPage:N})]})})}export{ge as default};
