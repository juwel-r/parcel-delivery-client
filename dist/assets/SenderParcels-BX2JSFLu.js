import{r as t,j as e,L as $,t as m}from"./index-BHEJdjnh.js";import{f as M,g as Q}from"./parcelApi-CBcjitBd.js";import{C as V,a as z,b as H,c as O,d as U}from"./card-DN-iCoyM.js";import{L as _}from"./label-DJxDZod0.js";import{P as c,a as I,D as W}from"./ParcelListSkeleton-DpU1dCPv.js";import{D as q,P as B,g as G}from"./PaginationCompo-CXf9qr8g.js";import{S as X}from"./spinner-D1tsCXB7.js";import{a as p,b as h,c as g}from"./tooltip-vmTTCXAz.js";import{S as Y}from"./SearchAndFilter-mRkhxu9V.js";import{H as J}from"./history-PDEt3pHc.js";import{X as K}from"./x-B8jIDsRA.js";import{f as j}from"./format-B-tffhz4.js";import"./skeleton-W8v24tY2.js";import"./index-CUCISiCF.js";import"./select-Dx3cQo6C.js";import"./check-BUpAhevX.js";import"./chevron-right-DwADlVQ_.js";import"./input-C6nhw93-.js";function je(){const l=t.useId(),[f,y]=t.useState("10"),[S,P]=t.useState(1),[o,D]=t.useState(""),[i,N]=t.useState(null),[C,v]=t.useState([]),[d,w]=t.useState(null),[x,E]=t.useState("-deliveryDate"),[T,u]=t.useState(""),{data:r,isLoading:n,isFetching:b}=M({limit:f,page:S,searchTerm:o,type:i,currentStatus:d,sort:x}),[k]=Q();t.useEffect(()=>{const s=[...new Set(r?.data.map(a=>a.type))];s.length>1&&v(s)},[r]);const A=async s=>{u(s);try{const a=await k(s).unwrap();console.log(a),m.info("Parcel has been cancelled.")}catch(a){console.log(a),m.error(G(a))}finally{u("")}},L=r?.meta?.page??0,R=r?.meta?.totalPage??1,F=r?.data?.length;return console.log(r),e.jsx(e.Fragment,{children:e.jsxs(V,{className:"w-full md:max-w-8/10 mx-auto",children:[e.jsxs(z,{children:[e.jsxs(H,{className:"text-center text-2xl",children:["Sender Parcels - ",F," "]}),e.jsx(O,{className:"text-center",children:"All parcel of you are shown in below. You can search and filter them as need."}),e.jsx(Y,{typeNames:C,searchTerm:o,setSearchTerm:D,type:i,setType:N,currentStatus:d,setCurrentStatus:w,sort:x,setSort:E})]}),!n&&!r?.data.length?e.jsx("h1",{className:"text-2xl text-muted-foreground text-center my-5",children:"No Data to show."}):e.jsx("div",{children:n||b?e.jsxs(e.Fragment,{children:[e.jsx(c,{}),e.jsx(c,{}),e.jsx(c,{}),e.jsx(c,{})]}):e.jsx(U,{className:"space-y-5 p-4 w-full",children:!n&&r?.data.length&&r.data.map(s=>e.jsx("div",{className:"relative flex w-full items-start gap-2 rounded-md border border-input p-4 shadow-xs outline-none has-data-[state=checked]:border-primary/50",children:e.jsxs("div",{className:"grid grid-cols-4 lg:grid-cols-12 md:gap-4 gap-2 gap-y-5 w-full",children:[e.jsxs("div",{className:"col-span-3 lg:col-span-4 flex grow items-center gap-5",children:[s.type==="Parcel"?e.jsx(I,{}):e.jsx(W,{}),e.jsxs("div",{className:"grid gap-2 flex-1",children:[e.jsxs(_,{htmlFor:l,className:"text-md",children:[s.type,e.jsx("span",{className:"text-xs leading-[inherit] font-normal text-muted-foreground bg-border px-1 rounded-xs",children:s.currentStatus})]}),e.jsxs("p",{id:`${l}-description`,className:"text-sm text-muted-foreground",children:["Delivery Fee: à§³",s.fee]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["To:"," ",e.jsx("strong",{children:s.receiver.name})]})]})]}),e.jsxs("div",{className:"col-span-4 text-muted-foreground text-sm space-y-1",children:[e.jsxs("p",{children:["Booking Date:",j(new Date(s.createdAt),"dd/M/y")]}),e.jsxs("p",{children:["Delivery Date:",j(new Date(s.deliveryDate),"dd/M/y")]}),e.jsxs("p",{children:["Delivery Address:",s.deliveryAddress]})]}),e.jsx("div",{className:"col-span-2 lg:col-span-2 flex items-center justify-center",children:e.jsx($,{to:`/tracking/${s.trackingId}`,children:e.jsxs(p,{children:[e.jsx(h,{type:"button",children:e.jsx("div",{className:"text-primary",children:e.jsx(J,{size:44,strokeWidth:2.75})})}),e.jsx(g,{children:e.jsx("p",{children:"View Status Logs"})})]})})}),e.jsx("div",{className:"col-span-2 flex items-center justify-center",children:e.jsx(q,{onConfirm:()=>A(s._id),content:"Cancel this parcel.",children:e.jsxs("button",{disabled:!(s.currentStatus==="REQUESTED"||s.currentStatus==="APPROVED")||n,className:` ${!(s.currentStatus==="REQUESTED"||s.currentStatus==="APPROVED")||n?"text-muted-foreground cursor-not-allowed flex justify-center items-center":"text-red-500 flex justify-center items-center"}`,children:[e.jsxs(p,{children:[e.jsx(h,{asChild:!0,type:"button",children:e.jsx(K,{size:44,strokeWidth:2.75})}),e.jsx(g,{children:e.jsx("p",{children:s.currentStatus==="REQUESTED"||s.currentStatus==="APPROVED"?"Cancel this parcel.":`This ${s.type} is already ${s.currentStatus}. so, you can not cancel this ${s.type}`})})]}),T===s._id&&e.jsx(X,{className:"size-8 text-primary"})]})})})]})},s._id))})}),e.jsx(B,{currentPage:L,totalPages:R,setLimit:y,setPage:P})]})})}export{je as default};
